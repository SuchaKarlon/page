<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Shiva Tyagi — Portfolio</title>

<!-- SEO -->
<meta name="description" content="Shiva Tyagi — Cinematic Web Designer">
<meta name="author" content="Shiva Tyagi">

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,system-ui}
body{background:#000;color:#fff;overflow:hidden}
nav{
 position:fixed;right:30px;top:50%;transform:translateY(-50%);
 display:flex;flex-direction:column;gap:30px;z-index:10
}
nav button{
 background:none;border:none;color:#aaa;
 writing-mode:vertical-rl;transform:rotate(180deg);
 cursor:pointer;letter-spacing:3px
}
nav button:hover{color:#ff003c}

#webgl{position:fixed;inset:0}

.hero{
 position:absolute;left:60px;bottom:120px;z-index:2
}

.service{
 position:absolute;top:50%;left:60px;display:flex;gap:20px
}
.service div{
 padding:12px 18px;border:1px solid #222;cursor:pointer
}
</style>
</head>

<body>

<nav>
 <button onclick="morph('logo')">ABOUT</button>
 <button onclick="morph('service1')">PROJECTS</button>
 <button onclick="morph('service2')">CONTACT</button>
</nav>

<div class="hero">
 <h1>Shiva Tyagi</h1>
 <p>Web Designer · India</p>
</div>

<canvas id="webgl"></canvas>

<script>
/* ===== THREE CORE ===== */
let scene=new THREE.Scene()
let camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,100)
camera.position.z=4

let renderer=new THREE.WebGLRenderer({
 canvas:document.getElementById('webgl'),alpha:true
})
renderer.setSize(innerWidth,innerHeight)
renderer.setPixelRatio(Math.min(devicePixelRatio,2))

let geo=new THREE.BufferGeometry()
let count=1800
let pos=new Float32Array(count*3)

for(let i=0;i<count*3;i++)pos[i]=(Math.random()-0.5)*4
geo.setAttribute('position',new THREE.BufferAttribute(pos,3))

let mat=new THREE.PointsMaterial({
 color:0xff003c,size:0.02,transparent:true
})
let points=new THREE.Points(geo,mat)
scene.add(points)

/* ===== LOGO → PARTICLES ===== */
function loadShape(img){
 let c=document.createElement('canvas')
 let ctx=c.getContext('2d')
 let i=new Image()
 i.src=img
 i.onload=()=>{
  c.width=i.width;c.height=i.height
  ctx.drawImage(i,0,0)
  let d=ctx.getImageData(0,0,c.width,c.height).data
  let arr=[]
  for(let y=0;y<c.height;y+=6)
   for(let x=0;x<c.width;x+=6){
    let a=d[(y*c.width+x)*4+3]
    if(a>50)arr.push([(x/c.width-0.5)*2,(0.5-y/c.height)*2,0])
   }
  morphTo(arr)
 }
}

function morphTo(target){
 let p=points.geometry.attributes.position.array
 for(let i=0;i<count;i++){
  let t=target[i%target.length]
  p[i*3]+= (t[0]-p[i*3])*0.1
  p[i*3+1]+= (t[1]-p[i*3+1])*0.1
  p[i*3+2]+= (t[2]-p[i*3+2])*0.1
 }
 points.geometry.attributes.position.needsUpdate=true
}

/* ===== SERVICE SWITCH ===== */
function morph(type){
 if(type==="logo")loadShape("logo.png")
 if(type==="service1")loadShape("service1.png")
 if(type==="service2")loadShape("service2.png")
}

/* ===== MOUSE DEPTH ===== */
let mx=0,my=0
addEventListener('mousemove',e=>{
 mx=(e.clientX/innerWidth-.5)
 my=(e.clientY/innerHeight-.5)
})

/* ===== LOOP ===== */
function animate(){
 requestAnimationFrame(animate)
 points.rotation.y+=0.002
 camera.position.x+=mx*0.05
 camera.position.y+=-my*0.05
 camera.lookAt(0,0,0)
 renderer.render(scene,camera)
}
animate()

onresize=()=>{
 camera.aspect=innerWidth/innerHeight
 camera.updateProjectionMatrix()
 renderer.setSize(innerWidth,innerHeight)
}
</script>

</body>
</html>
